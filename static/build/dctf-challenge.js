// Generated by CoffeeScript 1.10.0
(function() {
  $(function() {
    $('a[href$="contest/"]').addClass('current');
    stickFooter();
    $('a[href^="#mod-"]').on('click', function() {
      var pk;
      pk = ($(this).attr('href')).substr(5);
      $('#modalTitle').text($(this).text());
      $('#submit').data('pk', pk);
      $('#flagHolder').show();
      $('.alert').hide();
      return $.ajax({
        url: '/challenge/detail/',
        type: 'post',
        dataType: 'json',
        data: {
          pk: pk
        },
        success: function(data) {
          if (data.msg === 'okay') {
            $('.modal-body').html(data.content);
            return $('#toggleModal').click();
          } else {
            return false;
          }
        }
      });
    });
    return $('#submit').on('click', function() {
      var pk;
      pk = $(this).data('pk');
      return $.ajax({
        url: '/contest/submit/',
        type: 'post',
        dataType: 'json',
        data: {
          flag: $('#flagHolder').val(),
          pk: pk
        },
        success: function(data) {
          $('flagHolder').hide();
          if (data.msg === 'okay') {
            return $('.alert-success').fadeIn();
          } else if (data.msg === 'fail') {
            return $('.alert-danger').fadeIn();
          }
        }
      });
    });
  });

}).call(this);
