// Generated by CoffeeScript 1.10.0
(function() {
  $(function() {
    var PAGE_ITEM_COUNT, initteam, inituser;
    $('a[href$="ranking/"]').addClass('current');
    stickFooter();
    $('input[type="checkbox"]').bootstrapSwitch({
      size: 'mini',
      onColor: 'info',
      offColor: 'warning',
      handleWidth: 50,
      labelWidth: 30,
      onText: 'User',
      offText: 'Team',
      onInit: function(event, state) {
        return $(this).parent().parent().addClass('pull-right');
      },
      onSwitchChange: function(event, state) {
        if (state) {
          $('#teamList').hide();
          $('#userList').fadeIn();
          $('#userCont').data('focus', 'user');
        } else {
          $('#userList').hide();
          $('#teamList').fadeIn();
          $('#userCont').data('focus', 'team');
        }
        return stickFooter();
      }
    });
    PAGE_ITEM_COUNT = 10;
    inituser = function() {
      var total;
      total = 0;
      return $('tr.user').each(function() {
        total += 1;
        if (total <= PAGE_ITEM_COUNT) {
          return $(this).show();
        }
      });
    };
    initteam = function() {
      var total;
      total = 0;
      return $('tr.team').each(function() {
        if (total <= PAGE_ITEM_COUNT) {
          return $(this).show();
        }
      });
    };
    inituser();
    initteam();
    return $('[id^="pager"]').on('click', function() {
      var cnt, focus, page, total;
      focus = $('#userCont').data('focus');
      total = $("tr." + focus).length;
      page = $("#" + focus + "Cont").data('page');
      if ('Next' === ($(this).attr('id')).substr(5)) {
        if (page + PAGE_ITEM_COUNT >= total) {
          return;
        }
        page += PAGE_ITEM_COUNT;
      } else {
        if (page < PAGE_ITEM_COUNT) {
          return;
        }
        page -= PAGE_ITEM_COUNT;
      }
      $("tr." + focus).hide();
      $("#" + focus + "Cont").data('page', page);
      cnt = 0;
      $("tr." + focus).each(function() {
        cnt += 1;
        if ((page < cnt && cnt <= page + PAGE_ITEM_COUNT)) {
          return $(this).show();
        }
      });
      return stickFooter();
    });
  });

}).call(this);
